---
import Layout from '~/layouts/PageLayout.astro';

import CallToAction from '~/components/widgets/CallToAction.astro';
import Aim from '~/components/widgets/Aim.astro';
import Team from '~/components/widgets/Team.astro';
import i18next, { t } from 'i18next';
import bgVideo from '~/assets/videos/background.mp4';
import Categories from '~/components/widgets/Categories.astro';
import Gist from '~/components/widgets/Gist.astro';

export function getStaticPaths() {
  return i18next.languages.map((item) => ({
    params: { lang: item },
  }));
}

const { lang } = Astro.params;
await i18next.changeLanguage(lang);

const metadata = {
  title: t('site.title'),
};
---

<Layout metadata={metadata}>
  <video autoplay loop muted playsinline class="w-full h-[calc(100vh-75px)] top-[75px] bg-black">
    <source src={bgVideo} type="video/mp4" />
    Your browser does not support the video tag.
  </video>

  <Aim id="aim" title={t('content.title')} content={t('content.content')} />

  <Categories />

  <Gist id="aim" title={t('content.gists.gist1.title')} content={t('content.gists.gist1.content')} />
  <Gist id="aim" title={t('content.gists.gist2.title')} content={t('content.gists.gist2.content')} />
  <Gist id="aim" title={t('content.gists.gist3.title')} content={t('content.gists.gist3.content')} />

  <Team id="team" />

  <CallToAction
    id="contact"
    title={t('content.contact.title')}
    subtitle={t('content.contact.description')}
    actions={[
      {
        variant: 'primary',
        text: t('content.contact.button') || '',
        href: 'mailto:matej.novotnny@gmail.com',
      },
    ]}
  />
</Layout>
